import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*

rule "Set night mode"
when
    Item Sunrise_Event received update ON or
    Item Sunset_Event received update ON or
    System started
then
    var Date sunsetTime = (Sunset_Time.state as DateTimeType).calendar.time
    var Date sunriseTime = (Sunrise_Time.state as DateTimeType).calendar.time
    if( now.toDate().after(sunsetTime) || now.toDate().before(sunriseTime)){
      sendCommand(mode_night, ON)
    } else {
      sendCommand(mode_night, OFF)
    }
end
