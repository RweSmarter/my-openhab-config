// This rule file is autogenerated by HABmin.
// Any changes made manually to this file will be overwritten next time HABmin rules are saved.

// Imports
import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*

// Global Variables
var Timer _timer_005_A = null
var Timer _timer_005_B = null

rule "Reset Internet connection"
when
    Item Network_Internet changed
    or
    Item Network_Router changed
    or
    Item UG_Hannes_Power_Internet changed
then
  if (((Network_Internet.state == OFF) || (Network_Router.state == OFF))) {
    if (_timer_005_A == null) {
      _timer_005_A = createTimer(now.plusMinutes(2)) [|
        _timer_005_A.cancel()
        _timer_005_A = null
        // Internet weg.
        if (((Network_Internet.state == OFF) || (Network_Router.state == OFF) && (UG_Hannes_Power_Internet.state == ON))) {
          // Check rest of LAN
          if (((Network_nas.state == ON) || (Network_ccu.state == ON))) {
            sendCommand(UG_Hannes_Power_Internet, OFF)

null          }
        }
        else {
        sendCommand(UG_Hannes_Power_Internet, ON)
        }
      ]
    }
  }
  else if(_timer_005_A != null) {
    _timer_005_A.cancel()
    _timer_005_A = null
  }
end


