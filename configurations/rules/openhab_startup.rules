import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*

//----------------------------------------------------------
// Some items are not persisted. They should be kept in a
// certain state on startup.
//
rule "Initialize items"
when
        System started
then
  pushover("OpenHAB wurde gestartet.")

  logInfo(    "Initializer", "Started Timer ...")
  createTimer(now.plusSeconds(45)) [|
      logInfo(    "Initializer", "... initializing!")
      InitializeON?.members.filter( x | x.state == NULL).forEach[ item |
        logInfo("Initializer", "... initialize {}", item.name)
        postUpdate(item, ON )
      ]

      InitializeOFF?.members.filter( x | x.state == NULL).forEach[ item |
        logInfo("Initializer", "... initialize {}", item.name)
        postUpdate(item, OFF )
      ]

      InitializeZero?.members.filter( x | x.state == NULL).forEach[ item |
        logInfo("Initializer", "... initialize {}", item.name)
        postUpdate( item, 0)
      ]
  ]
end
