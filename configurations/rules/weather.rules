import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*


//rule "Update max and min temperatures"
//when
//  Item Weather_Temperature changed or
//  Time cron "0 0 0 * * ?" or
//  System started
//then
//  postUpdate(Weather_Temp_Max, Weather_Temperature.maximumSince(now.toDateMidnight).state)
//  postUpdate(Weather_Temp_Min, Weather_Temperature.minimumSince(now.toDateMidnight).state)
//end

// Creates an item that stores the last update time of this item
rule "Records last weather update time"
when
  Item Weather_Temperature received update
then
  postUpdate(Weather_LastUpdate, new DateTimeType())
end

var String wetterOutput = null

rule "schicke Wetterbericht fuer heute"
when
  Time cron "0 0 7 * * ?"
then
  wetterOutput = "Wetter heute:"
        wetterOutput = wetterOutput + " " + Condition_today.state
        wetterOutput = wetterOutput + " Min: " + Weather_Forecast_Temp_Min.state
        wetterOutput = wetterOutput + " Max: " + Weather_Forecast_Temp_Max.state
        wetterOutput = wetterOutput + " Regen: " + Weather_Precip_Probability.state
        logInfo("Rule Wetterbericht", wetterOutput)
  pushover(wetterOutput)
end
