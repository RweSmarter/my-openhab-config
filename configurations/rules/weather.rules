import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*


rule "Update max and min temperatures"
when
	Item Weather_Temperature changed or
	Time cron "0 0 0 * * ?" or
	System started
then	
	postUpdate(Weather_Temp_Max, Weather_Temperature.maximumSince(now.toDateMidnight).state)
	postUpdate(Weather_Temp_Min, Weather_Temperature.minimumSince(now.toDateMidnight).state)
end

var String wetterOutput = null

rule "schicke Wetterbericht fuer heute"
when
	Time cron "0 * * * * ?"
then	
		wetterOutput = "Wetter heute:"
        wetterOutput = wetterOutput + " " + Condition_today
        wetterOutput = wetterOutput + " Min: " + Weather_Forecast_Temp_Min
        wetterOutput = wetterOutput + " Max: " + Weather_Forecast_Temp_Max
        wetterOutput = wetterOutput + " Regen: " + Weather_Precip_Probability
        logInfo("Rule Wetterbericht", wetterOutput)
		pushover(wetterOutput)
end
